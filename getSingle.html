<!DOCTYPE html>
<html>
<head>
	<title>单例模式</title>
</head>
<body>
<input type="button" id="loginbtn" value="Click me"/>


<script type="text/javascript">
//管理单例
	var getSingle = function(fn){
		var instance;
		return function(){
			return instance || (instance = fn.apply(this, arguments));
		}
	};


	//创造实例对象
	var createLoginLayer = function(){
		var div = document.createElement("div");
		div.innerHTML = "I am LOGIN layer.";
		div.style.display = "none";
		document.body.appendChild(div);
		return div;
	}

	//制造单例，绑定事件
	var createSingleLoginLayer = getSingle(createLoginLayer);
	document.getElementById("loginbtn").onclick = function(){
		var loginLayer = createSingleLoginLayer();
		loginLayer.style.display="block";
	};

	//
</script>
</body>
</html>